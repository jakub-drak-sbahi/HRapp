@model IEnumerable<MainApp.Models.Application>

@{
    ViewData["Title"] = "Index";
}

<div class="row page-box">
    <div class="col-sm-12">
        <div class="table-title">
            <div class="row">
                <div class="col-12 col-md-4 d-flex align-items-center py-2">
                    <h3 class="font-weight-bold mb-0">
                        Applications list
                    </h3>
                    <div>
                        <span class="badge badge-pill badge-primary align-top">
                            @Model.Count()
                        </span>
                    </div>
                </div>
                <div class="col-12 col-md-4 py-2">
                    @using (Html.BeginForm("Index", "Application", FormMethod.Get))
                    {
                        <div class="input-group search-input"
                             style="border-radius: 20px">
                            <input name="search"
                                   type="text"
                                   class="form-control"
                                   placeholder="Search by offer id.."
                                   aria-label="Search by offer id"
                                   aria-describedby="button-search">
                            <div class="input-group-append">
                                <button id="button-search"
                                        class="btn btn-primary"
                                        type="submit">
                                    <i class="fa fa-search"></i>
                                </button>
                            </div>
                        </div>
                    }
                </div>
                <div class="col-12 col-sm-4 text-right py-2">
                    <a href="@Url.Action("Create", "Application")">
                        <button class="btn btn-rounded btn-outline-primary"
                                data-toggle="modal">
                            <i class="fa fa-plus pr-3"></i>
                            Add Aplication
                        </button>
                    </a>
                </div>
            </div>
        </div>

        <table class="table">
            <thead>
                <tr>
                    <th>
                        @Html.DisplayNameFor(model => model.Id)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.OfferId)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.FirstName)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.LastName)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.PhoneNumber)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.EmailAddress)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.ContactAgreement)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.CvUrl)
                    </th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.Id)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.OfferId)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.FirstName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.LastName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.PhoneNumber)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.EmailAddress)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.ContactAgreement)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.CvUrl)
                        </td>
                        <td>
                            @*@Html.ActionLink("Edit", "Edit", new { /* id=item.PrimaryKey */ }) |
        @Html.ActionLink("Details", "Details", new { /* id=item.PrimaryKey */ }) |
        @Html.ActionLink("Delete", "Delete", new { /* id=item.PrimaryKey */ })*@

                            <button class="btn btn-rounded btn-danger mx-2"
                                    data-toggle="modal"
                                    data-target="#confirm-delete">
                                <i class="fa fa-trash-alt pr-2"></i>
                                Delete
                            </button>

                            <div class="modal fade" id="confirm-delete" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                <div class="modal-dialog">
                                    <div class="modal-content">

                                        <div class="modal-header">
                                            <h5 class="modal-title">Delete Application</h5>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>

                                        <div class="modal-body">
                                            <p class="font-weight-bold mb-0">Are you sure you want to delete this?</p>
                                            <p class="text-danger mb-0"><small>This action cannot be undone.</small></p>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary btn-rounded" data-dismiss="modal">
                                                <i class="fa fa-chevron-left pr-2"></i>
                                                Cancel
                                            </button>
                                            @using (Html.BeginForm("Delete", "Application", new { item.Id }, FormMethod.Post, null, new { style = "display:inline;" }))
                                            {
                                                @Html.AntiForgeryToken()
                                                <button type="submit" class="btn btn-rounded btn-danger">
                                                    <i class="fa fa-trash pr-2"></i>
                                                    Delete
                                                </button>
                                            }
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

